{"version":3,"sources":["../lib/XYDiagram.jsx","../lib/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import React, { PropTypes } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport interact from \"interact.js\"\n\n\nfunction defaultLabelFunc(value) {\n\treturn `${value}`\n}\n\n\nexport default class XYDiagram extends React.PureComponent {\n\tstatic displayName = \"XYDiagram\"\n\n\tstatic propTypes = {\n\t\twidth: PropTypes.number.isRequired,\n\t\theight: PropTypes.number.isRequired,\n\t\tlabelFont: PropTypes.string,\n\t\tlabelSize: PropTypes.number,\n\t\tlabelColor: PropTypes.string,\n\t\tcenterText: PropTypes.string,\n\t\tcenterTextFont: PropTypes.string,\n\t\tcenterTextSize: PropTypes.number,\n\t\tcenterTextColor: PropTypes.string,\n\n\t\taxisColor: PropTypes.string,\n\t\tbackgroundColor: PropTypes.string,\n\n\t\tleftAxisXOffset: PropTypes.number,\n\t\trightAxisXOffset: PropTypes.number,\n\n\t\tx: PropTypes.array.isRequired,\n\t\txStep: PropTypes.number,\n\t\txMin: React.PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n\t\txMax: React.PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n\t\txFactor: PropTypes.number,\n\t\txGridOrigin: PropTypes.number,\n\t\txGridSpacing: PropTypes.number,\n\t\txGridAtPoint: PropTypes.bool,\n\t\txGridColor: PropTypes.string,\n\t\txLabelOrigin: PropTypes.number,\n\t\txLabelSpacing: PropTypes.number,\n\t\txLabelAtPoint: PropTypes.bool,\n\t\txLabelFunc: PropTypes.func,\n\t\txLabelNoOverlapCheck: PropTypes.bool, // overlap checks only work from left to right, disable if points are right to left\n\n\t\ty: PropTypes.array.isRequired,\n\t\tyMin: PropTypes.number,\n\t\tyMax: PropTypes.number,\n\t\tyFactor: PropTypes.number,\n\t\tyValuesPerX: PropTypes.number, // show that number of bars per point, y.length == x.length * yValuesPerX\n\t\tyColor: PropTypes.string,\n\t\tyOpacity: PropTypes.number,\n\t\tyLabelColor: PropTypes.string,\n\t\tyGridOrigin: PropTypes.number,\n\t\tyGridSpacing: PropTypes.number,\n\t\tyGridColor: PropTypes.string,\n\t\tyLabelOrigin: PropTypes.number,\n\t\tyLabelSpacing: PropTypes.number,\n\t\tyLabelFunc: PropTypes.func,\n\t\tyLabelAtPoint: PropTypes.bool,\n\t\tyLineWidth: PropTypes.number,\n\t\tyLineDashes: PropTypes.string,\n\t\tmarkerSize: PropTypes.number,\n\t\tyBars: PropTypes.number,\n\t\tyAxisTitle: PropTypes.string,\n\n\t\ty2: PropTypes.array,\n\t\ty2Min: PropTypes.number,\n\t\ty2Max: PropTypes.number,\n\t\ty2Factor: PropTypes.number,\n\t\ty2ValuesPerX: PropTypes.number, // show that number of bars per point, y2.length == x.length * y2ValuesPerX\n\t\ty2Color: PropTypes.string,\n\t\ty2Opacity: PropTypes.number,\n\t\ty2LabelColor: PropTypes.string,\n\t\ty2LabelOrigin: PropTypes.number,\n\t\ty2LabelSpacing: PropTypes.number,\n\t\ty2LabelFunc: PropTypes.func,\n\t\ty2LabelAtPoint: PropTypes.bool,\n\t\ty2LineWidth: PropTypes.number,\n\t\ty2LineDashes: PropTypes.string,\n\t\tmarkerSize2: PropTypes.number,\n\t\ty2OnRightAxis: PropTypes.bool,\n\t\ty2Bars: PropTypes.number,\n\t\ty2AxisTitle: PropTypes.string,\n\n\t\ty3: PropTypes.array,\n\t\ty3Min: PropTypes.number,\n\t\ty3Max: PropTypes.number,\n\t\ty3Factor: PropTypes.number,\n\t\ty3ValuesPerX: PropTypes.number, // show that number of bars per point, y3.length == x.length * y3ValuesPerX\n\t\ty3Color: PropTypes.string,\n\t\ty3Opacity: PropTypes.number,\n\t\ty3LabelOrigin: PropTypes.number,\n\t\ty3LabelSpacing: PropTypes.number,\n\t\ty3LabelFunc: PropTypes.func,\n\t\ty3LineWidth: PropTypes.number,\n\t\ty3LineDashes: PropTypes.string,\n\t\tmarkerSize3: PropTypes.number,\n\t\ty3Bars: PropTypes.number,\n\n\t\ty4: PropTypes.array,\n\t\ty4Min: PropTypes.number,\n\t\ty4Max: PropTypes.number,\n\t\ty4Factor: PropTypes.number,\n\t\ty4Color: PropTypes.string,\n\t\ty4Opacity: PropTypes.number,\n\t\ty4LabelOrigin: PropTypes.number,\n\t\ty4LabelSpacing: PropTypes.number,\n\t\ty4LabelFunc: PropTypes.func,\n\t\ty4LineWidth: PropTypes.number,\n\t\ty4LineDashes: PropTypes.string,\n\t\tmarkerSize4: PropTypes.number,\n\n\t\tbgValues: PropTypes.array,\n\t\tbgColorFunc: PropTypes.func,\n\n\t\tonClickMarker: PropTypes.func,\n\t\tselectedIndex: PropTypes.number,\n\t\tselectedMarkerSize: PropTypes.number,\n\t\tselectedMarkerColor: PropTypes.string,\n\t\tleftMarkerX: PropTypes.number,\n\t\tleftMarkerColor: PropTypes.string,\n\t\tleftMarkerDragged: PropTypes.func,\n\t\trightMarkerX: PropTypes.number,\n\t\trightMarkerColor: PropTypes.string,\n\t\trightMarkerDragged: PropTypes.func,\n\t\tleftRightMarkerCoverColor: PropTypes.string,\n\t\tleftRightMarkerCoverOpacity: PropTypes.number,\n\t\tleftRightMarkerWidth: PropTypes.number,\n\n\t\textraPointsX: PropTypes.array,\n\t\textraPointsY: PropTypes.array,\n\t\textraPointsSize: PropTypes.number,\n\t\textraPointsColor: PropTypes.string,\n\t}\n\n\tstatic defaultProps = {\n\t\tlabelFont: `\"Lucida Console\", Monaco, monospace`,\n\t\tlabelSize: 16,\n\t\tlabelColor: \"#000\",\n\t\tcenterText: \"\",\n\t\tcenterTextFont: `\"Lucida Console\", Monaco, monospace`,\n\t\tcenterTextSize: 48,\n\t\tcenterTextColor: \"#000\",\n\t\taxisColor: \"#000\",\n\t\tbackgroundColor: \"#FFF\",\n\n\t\txStep: 1,\n\t\txMin: 0,\n\t\txMax: 1,\n\t\txFactor: 1,\n\t\txGridOrigin: 0,\n\t\txGridAtPoint: false,\n\t\txGridColor: \"#AAA\",\n\t\txLabelOrigin: 0,\n\t\txLabelAtPoint: false,\n\t\txLabelFunc: defaultLabelFunc,\n\t\txLabelNoOverlapCheck: false,\n\n\t\tyMin: 0,\n\t\tyMax: 1,\n\t\tyFactor: 1,\n\t\tyValuesPerX: 1,\n\t\tyColor: \"#0082C8\",\n\t\tyOpacity: 1,\n\t\tyGridOrigin: 0,\n\t\tyGridColor: \"#AAA\",\n\t\tyLabelOrigin: 0,\n\t\tyLabelFunc: defaultLabelFunc,\n\t\tyLabelAtPoint: false,\n\t\tyLineWidth: 1,\n\t\tmarkerSize: 0,\n\t\tyBars: 0,\n\n\t\ty2Min: 0,\n\t\ty2Max: 1,\n\t\ty2Factor: 1,\n\t\ty2ValuesPerX: 1,\n\t\ty2Color: \"#92D050\",\n\t\ty2Opacity: 1,\n\t\ty2LabelOrigin: 0,\n\t\ty2LabelFunc: defaultLabelFunc,\n\t\ty2LabelAtPoint: false,\n\t\ty2LineWidth: 1,\n\t\tmarkerSize2: 0,\n\t\ty2OnRightAxis: false,\n\t\ty2Bars: 0,\n\n\t\ty3Min: 0,\n\t\ty3Max: 1,\n\t\ty3Factor: 1,\n\t\ty3ValuesPerX: 1,\n\t\ty3Color: \"#FF00FF\",\n\t\ty3Opacity: 1,\n\t\ty3LabelOrigin: 0,\n\t\ty3LabelFunc: defaultLabelFunc,\n\t\ty3LineWidth: 1,\n\t\tmarkerSize3: 0,\n\t\ty3Bars: 0,\n\n\t\ty4Min: 0,\n\t\ty4Max: 1,\n\t\ty4Factor: 1,\n\t\ty4Color: \"#647280\",\n\t\ty4Opacity: 1,\n\t\ty4LabelOrigin: 0,\n\t\ty4LabelFunc: defaultLabelFunc,\n\t\ty4LineWidth: 1,\n\t\tmarkerSize4: 0,\n\n\t\tselectedIndex: -1,\n\t\tselectedMarkerSize: 0,\n\t\tselectedMarkerColor: \"#0082C8\",\n\t\tleftMarkerX: NaN,\n\t\tleftMarkerColor: \"#11F\",\n\t\trightMarkerX: NaN,\n\t\trightMarkerColor: \"#11F\",\n\t\tleftRightMarkerCoverColor: \"#666\",\n\t\tleftRightMarkerCoverOpacity: 0.5,\n\t\tleftRightMarkerWidth: 16,\n\n\t\textraPointsSize: 5,\n\t\textraPointsColor: \"#F00\",\n\t}\n\n\tstatic shiftArray(a, val) {\n\t\ta.copyWithin(0, 1)\n\t\ta[a.length - 1] = val\n\t}\n\n\tstatic rotateArray(a) {\n\t\tXYDiagram.shiftArray(a, a[0])\n\t}\n\n\tstatic calcTextWidth(text, labelSize) {\n\t\treturn text.length * labelSize * 0.6\n\t}\n\n\tstatic calcLeftAxisXOffset(yMin, yMax, yAxisTitle = null, yLabelFunc = defaultLabelFunc, labelSize = XYDiagram.defaultProps.labelSize) {\n\t\tconst textHeight = labelSize * 1.2\n\t\tconst minLabel = yLabelFunc(yMin, yMin, yMax)\n\t\tconst maxLabel = yLabelFunc(yMax, yMin, yMax)\n\t\tlet textWidth = Math.max(XYDiagram.calcTextWidth(minLabel, labelSize), XYDiagram.calcTextWidth(maxLabel, labelSize))\n\t\tif (yAxisTitle) {\n\t\t\ttextWidth = Math.max(textWidth, XYDiagram.calcTextWidth(yAxisTitle, labelSize) * 0.5)\n\t\t}\n\t\treturn textHeight * 0.2 + textWidth\n\t}\n\n\tstatic calcRightAxisXOffset(y2Min, y2Max, y2AxisTitle = null, y2LabelFunc = defaultLabelFunc, labelSize = XYDiagram.defaultProps.labelSize) {\n\t\tconst textHeight = labelSize * 1.2\n\t\tconst minLabel = y2LabelFunc(y2Min, y2Min, y2Max)\n\t\tconst maxLabel = y2LabelFunc(y2Max, y2Min, y2Max)\n\t\tlet textWidth = Math.max(XYDiagram.calcTextWidth(minLabel, labelSize), XYDiagram.calcTextWidth(maxLabel, labelSize))\n\t\tif (y2AxisTitle) {\n\t\t\ttextWidth = Math.max(textWidth, XYDiagram.calcTextWidth(y2AxisTitle, labelSize) * 0.5)\n\t\t}\n\t\treturn textHeight * 0.2 + textWidth\n\t}\n\n\tconstructor(...args) {\n\t\tsuper(...args)\n\t\tthis.onClickMarker = this.onClickMarker.bind(this)\n\t}\n\n\taxisXOffset() {\n\t\tif (this.props.leftAxisXOffset) {\n\t\t\treturn this.props.leftAxisXOffset\n\t\t}\n\t\tif (!this.hasLeftYLabels()) {\n\t\t\treturn 0\n\t\t}\n\t\tconst { yMin, yMax, yAxisTitle, yLabelFunc, labelSize } = this.props\n\t\treturn XYDiagram.calcLeftAxisXOffset(yMin, yMax, yAxisTitle, yLabelFunc, labelSize)\n\t}\n\n\trightAxisXOffset() {\n\t\tif (this.props.rightAxisXOffset) {\n\t\t\treturn this.props.rightAxisXOffset\n\t\t}\n\t\tif (!this.hasRightYLabels()) {\n\t\t\treturn 0\n\t\t}\n\t\tconst { y2Min, y2Max, y2AxisTitle, y2LabelFunc, labelSize } = this.props\n\t\treturn XYDiagram.calcRightAxisXOffset(y2Min, y2Max, y2AxisTitle, y2LabelFunc, labelSize)\n\t}\n\n\tonClickMarker(event) {\n\t\tif (this.props.onClickMarker) {\n\t\t\tconst index = parseInt(event.target.getAttribute(\"data-index\"))\n\t\t\tconst x = parseFloat(event.target.getAttribute(\"data-x\"))\n\t\t\tconst y = parseFloat(event.target.getAttribute(\"data-y\"))\n\t\t\tconst selected = event.target.hasAttribute(\"data-selected\")\n\t\t\tthis.props.onClickMarker(index, x, y, selected)\n\t\t}\n\t}\n\n\tmakeDraggable(group, marker, onDragged) {\n\t\tconst parent = ReactDOM.findDOMNode(this.refs.parent)\n\t\tgroup = ReactDOM.findDOMNode(group)\n\t\tmarker = ReactDOM.findDOMNode(marker)\n\t\tinteract(marker)\n\t\t\t.draggable({\n\t\t\t\tstartAxis: \"x\",\n\t\t\t\tlockAxis: \"x\",\n\t\t\t\tpreventDefault: \"always\",\n\t\t\t\trestrict: {\n\t\t\t\t\trestriction: parent,\n\t\t\t\t\telementRect: { top: 0, left: 0, bottom: 1, right: 1 },\n\t\t\t\t}\n\t\t\t})\n\t\t\t.on(\"dragstart\", (event) => {\n\t\t\t\tevent.preventDefault()\n\t\t\t\t// Only way to change the class of an SVG element:\n\t\t\t\tmarker.setAttribute(\"class\", \"dragging\")\n\t\t\t})\n\t\t\t.on(\"dragmove\", (event) => {\n\t\t\t\tconst dx = event.clientX - event.clientX0\n\t\t\t\tgroup.setAttribute(\"transform\", `translate(${dx})`)\n\t\t\t})\n\t\t\t.on(\"dragend\", (event) => {\n\t\t\t\t// Only way to change the class of an SVG element:\n\t\t\t\tmarker.removeAttribute(\"class\")\n\t\t\t\tgroup.removeAttribute(\"transform\")\n\t\t\t\tif (onDragged) {\n\t\t\t\t\tconst clientX = event.clientX - parent.getBoundingClientRect().left\n\n\t\t\t\t\tconst { xFactor } = this.props\n\t\t\t\t\tconst xMin = this.xMin()\n\t\t\t\t\tconst xMax = this.xMax()\n\t\t\t\t\tconst leftMarkerVisible = this.isLeftMarkerVisible()\n\t\t\t\t\tconst xOffset = leftMarkerVisible ? this.props.leftRightMarkerWidth : 0\n\t\t\t\t\tconst axisXOffset = this.axisXOffset()\n\t\t\t\t\tconst rangeWidth = this.rangeWidth()\n\t\t\t\t\tconst xRange = xMax - xMin\n\t\t\t\t\tconst xScale = rangeWidth / xRange\n\t\t\t\t\t// axisXOffset + xOffset + (x*xFactor - xMin) * xScale = clientX\n\t\t\t\t\t// (x*xFactor - xMin) * xScale = clientX - axisXOffset - xOffset\n\t\t\t\t\t// x*xFactor - xMin = (clientX - axisXOffset - xOffset) / xScale\n\t\t\t\t\t// x*xFactor = (clientX - axisXOffset - xOffset) / xScale + xMin\n\t\t\t\t\tconst x = ((clientX - axisXOffset - xOffset) / xScale + xMin) / xFactor\n\t\t\t\t\tonDragged(x, clientX)\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.makeDraggable(this.refs.leftMarkerGroup, this.refs.leftMarker, this.props.leftMarkerDragged)\n\t\tthis.makeDraggable(this.refs.rightMarkerGroup, this.refs.rightMarker, this.props.rightMarkerDragged)\n\t}\n\n\tisLeftMarkerVisible() {\n\t\treturn !isNaN(this.props.leftMarkerX) && this.props.leftMarkerX !== this.props.rightMarkerX\n\t}\n\n\tisRightMarkerVisible() {\n\t\treturn !isNaN(this.props.rightMarkerX) && this.props.leftMarkerX !== this.props.rightMarkerX\n\t}\n\n\thasXLabels() {\n\t\treturn !!this.props.xLabelSpacing || this.props.xLabelAtPoint\n\t}\n\n\thasLeftYLabels() {\n\t\treturn !!this.props.yLabelSpacing && !this.props.y2OnRightAxis\n\t}\n\n\thasRightYLabels() {\n\t\treturn !!this.props.y2LabelSpacing || (!!this.props.yLabelSpacing && this.props.y2OnRightAxis)\n\t}\n\n\trangeWidth() {\n\t\tlet rangeWidth = this.props.width - this.axisXOffset() - this.rightAxisXOffset()\n\t\trangeWidth -= this.isLeftMarkerVisible() ? this.props.leftRightMarkerWidth : 0\n\t\trangeWidth -= this.isRightMarkerVisible() ? this.props.leftRightMarkerWidth : 0\n\t\treturn rangeWidth\n\t}\n\n\txMin() {\n\t\tconst { xMin } = this.props\n\t\treturn (typeof xMin === \"function\") ? xMin(this.axisXOffset()) : xMin\n\t}\n\n\txMax() {\n\t\tconst { xMax } = this.props\n\t\treturn (typeof xMax === \"function\") ? xMax(this.rightAxisXOffset()) : xMax\n\t}\n\n\ttextWidth(text) {\n\t\treturn text.length * this.props.labelSize * 0.6\n\t}\n\n\trender() {\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// Set constants to work with:\n\n\t\tconst leftMarkerVisible = this.isLeftMarkerVisible()\n\t\tconst rightMarkerVisible = this.isRightMarkerVisible()\n\n\t\tconst { labelFont, labelSize, labelColor, xLabelOrigin, xLabelSpacing, xLabelAtPoint, yLabelAtPoint, xLabelFunc, xLabelNoOverlapCheck, xStep } = this.props\n\t\tconst { yLabelOrigin, yLabelSpacing, yLabelFunc, yColor, yOpacity, markerSize, yAxisTitle } = this.props\n\t\tconst { y2LabelOrigin, y2LabelSpacing, y2LabelFunc, y2LabelAtPoint, y2Color, y2Opacity, markerSize2, y2AxisTitle } = this.props\n\t\tconst { y3Color, y3Opacity, markerSize3 } = this.props\n\t\tconst { y4Color, y4Opacity, markerSize4 } = this.props\n\n\t\tconst yLabelColor = this.props.yLabelColor || yColor\n\t\tconst y2LabelColor = this.props.y2LabelColor || y2Color\n\n\t\tconst textHeight = labelSize * 1.2\n\t\tconst hasXLabels = this.hasXLabels()\n\t\tconst hasLeftYLabels = this.hasLeftYLabels()\n\t\tconst hasRightYLabels = this.hasRightYLabels()\n\t\tconst hasYLabels = hasLeftYLabels || hasRightYLabels\n\n\t\tconst { xFactor, width, height, selectedIndex } = this.props\n\t\tconst { yMin, yMax, yFactor, yBars } = this.props\n\t\tconst { y2Min, y2Max, y2Factor, y2Bars } = this.props\n\t\tconst { y3Min, y3Max, y3Factor, y3Bars } = this.props\n\t\tconst { y4Min, y4Max, y4Factor } = this.props\n\t\tconst { xGridOrigin, xGridSpacing, xGridAtPoint, xGridColor, yGridOrigin, yGridSpacing, yGridColor, backgroundColor } = this.props\n\t\tconst { yValuesPerX, y2ValuesPerX, y3ValuesPerX } = this.props\n\n\t\tconst xOffset = leftMarkerVisible ? this.props.leftRightMarkerWidth : 0\n\t\tconst axisXOffset = this.axisXOffset()\n\t\tconst axisXOffsetFixed = axisXOffset.toFixed()\n\t\tconst rightAxisXOffset = this.rightAxisXOffset()\n\t\tconst rightAxisX = width - rightAxisXOffset\n\t\tconst rightAxisXFixed = rightAxisX.toFixed(1)\n\t\tconst axisYOffset = hasXLabels ? textHeight : (hasYLabels ? textHeight * 0.5 : 0)\n\t\tconst axisYOffsetFixed = axisYOffset.toFixed(1)\n\n\t\tconst rangeWidth = this.rangeWidth()\n\t\tlet rangeTop = height - textHeight * 0.5\n\t\tlet rangeHeight = height - axisYOffset - textHeight * 0.5\n\t\tif (yAxisTitle || y2AxisTitle) {\n\t\t\trangeTop -= textHeight\n\t\t\trangeHeight -= textHeight\n\t\t}\n\n\t\tconst xMin = this.xMin()\n\t\tconst xMax = this.xMax()\n\n\t\tconst xRange = xMax - xMin\n\t\tconst yRange = yMax - yMin\n\t\tconst y2Range = y2Max - y2Min\n\t\tconst y3Range = y3Max - y3Min\n\t\tconst y4Range = y4Max - y4Min\n\n\t\tconst xScale = rangeWidth / xRange\n\t\tconst yScale = rangeHeight / yRange\n\t\tconst y2Scale = rangeHeight / y2Range\n\t\tconst y3Scale = rangeHeight / y3Range\n\t\tconst y4Scale = rangeHeight / y4Range\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// Transform x/y values to graphics coordinates:\n\n\t\tfunction transformX(x) {\n\t\t\treturn axisXOffset + xOffset + (x*xFactor - xMin) * xScale\n\t\t}\n\n\t\tfunction transformY(y) {\n\t\t\treturn axisYOffset + (y*yFactor - yMin) * yScale\n\t\t}\n\n\t\tfunction transformY2(y2) {\n\t\t\treturn axisYOffset + (y2*y2Factor - y2Min) * y2Scale\n\t\t}\n\n\t\tfunction transformY3(y3) {\n\t\t\treturn axisYOffset + (y3*y3Factor - y3Min) * y3Scale\n\t\t}\n\n\t\tfunction transformY4(y4) {\n\t\t\treturn axisYOffset + (y4*y4Factor - y4Min) * y4Scale\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// Axis lines:\n\n\t\tlet axisPoints = `${axisXOffsetFixed},${rangeTop} ${axisXOffsetFixed},${axisYOffsetFixed} ${rightAxisX},${axisYOffsetFixed}`\n\t\tif (hasRightYLabels) {\n\t\t\taxisPoints += ` ${rightAxisXFixed},${rangeTop}`\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// Grid lines:\n\n\t\tlet xGridLinesD = \"\"\n\t\tlet yGridLinesD = \"\"\n\t\tif (xGridAtPoint) {\n\t\t\tfor (const x of this.props.x) {\n\t\t\t\tif (x >= xMin && x <= xMax) {\n\t\t\t\t\tconst tx = transformX(x).toFixed(1)\n\t\t\t\t\txGridLinesD += `M${tx} ${axisYOffsetFixed}V${rangeTop}`\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (xGridSpacing) {\n\t\t\tconst start = xGridOrigin !== 0 ? xGridOrigin : Math.ceil(xMin / xGridSpacing) * xGridSpacing\n\t\t\tfor (let x = start; x <= xMax; x += xGridSpacing) {\n\t\t\t\tif (x >= xMin) {\n\t\t\t\t\tconst tx = transformX(x).toFixed(1)\n\t\t\t\t\txGridLinesD += `M${tx} ${axisYOffsetFixed}V${rangeTop}`\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (yGridSpacing) {\n\t\t\tconst start = yGridOrigin !== 0 ? yGridOrigin : Math.ceil(yMin / yGridSpacing) * yGridSpacing\n\t\t\tfor (let y = start; y <= yMax; y += yGridSpacing) {\n\t\t\t\tif (y >= yMin) {\n\t\t\t\t\tconst ty = transformY(y).toFixed(1)\n\t\t\t\t\tyGridLinesD += `M${axisXOffsetFixed} ${ty}H${rightAxisXFixed}`\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tlet gridLines = null\n\t\tif (xGridLinesD.length > 0 || yGridLinesD.length > 0) {\n\t\t\tif (xGridColor === yGridColor) {\n\t\t\t\tgridLines = <path d={xGridLinesD + yGridLinesD} stroke={xGridColor} strokeWidth=\"1\"/>\n\t\t\t} else {\n\t\t\t\tgridLines = [\n\t\t\t\t\t<path key=\"xGrid\" d={xGridLinesD} stroke={xGridColor} strokeWidth=\"1\"/>,\n\t\t\t\t\t<path key=\"yGrid\" d={yGridLinesD} stroke={yGridColor} strokeWidth=\"1\"/>,\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// Labels:\n\n\t\tconst numYPoints = Math.min(this.props.x.length, this.props.y.length / yValuesPerX)\n\n\t\tconst labels = []\n\t\tif (hasXLabels) {\n\t\t\tlet ticksD = \"\"\n\t\t\tlet lastTextRightX = -Number.MAX_VALUE\n\n\t\t\tconst addXLabel = x => {\n\t\t\t\tif (x < xMin || x > xMax) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst tx = transformX(x)\n\t\t\t\tconst txFixed = tx.toFixed(1)\n\t\t\t\tticksD += `M${txFixed} ${(axisYOffset - textHeight*0.2).toFixed(1)}V${axisYOffset}`\n\t\t\t\tconst text = xLabelFunc(x, xMin, xMax)\n\t\t\t\tconst halfWidth = this.textWidth(text) * 0.5\n\t\t\t\tif (xLabelNoOverlapCheck || (tx - halfWidth > lastTextRightX)) {\n\t\t\t\t\tlastTextRightX = tx + halfWidth\n\t\t\t\t\tlabels.push(\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\tkey={\"xlt\" + x}\n\t\t\t\t\t\t\tx={txFixed}\n\t\t\t\t\t\t\ty={(-textHeight*0.1).toFixed(1)}\n\t\t\t\t\t\t\ttransform=\"scale(1,-1)\"\n\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\tfill={labelColor}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (xLabelAtPoint) {\n\t\t\t\tfor (const x of this.props.x) {\n\t\t\t\t\taddXLabel(x)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let x = xLabelOrigin !== 0 ? xLabelOrigin : Math.ceil(xMin / xLabelSpacing) * xLabelSpacing; x <= xMax; x += xLabelSpacing) {\n\t\t\t\t\taddXLabel(x)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlabels.push(<path key=\"xll\" d={ticksD} stroke={labelColor} strokeWidth=\"1\"/>)\n\t\t}\n\n\t\tif (yLabelAtPoint) {\n\t\t\tconst labelYOffset = labelSize * -0.5\n\n\t\t\tfor (let i = 0; i < numYPoints; i += xStep) {\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y = this.props.y[i * yValuesPerX]\n\t\t\t\tif (!Number.isFinite(x) || !Number.isFinite(y) || x < xMin || x > xMax) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tconst tx = transformX(x)\n\t\t\t\tconst txFixed = tx.toFixed(1)\n\t\t\t\tconst ty = transformY(y)\n\n\t\t\t\tconst text = yLabelFunc(y, yMin, yMax)\n\t\t\t\tlabels.push(\n\t\t\t\t\t<text\n\t\t\t\t\t\tkey={\"ylap\" + i}\n\t\t\t\t\t\tx={txFixed}\n\t\t\t\t\t\ty={(labelYOffset - ty).toFixed(1)}\n\t\t\t\t\t\ttransform=\"scale(1,-1)\"\n\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\tfill={yColor}\n\t\t\t\t\t>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</text>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tif (y2LabelAtPoint) {\n\t\t\tconst labelYOffset = labelSize * -0.5\n\n\t\t\tfor (let i = 0; i < numYPoints; i += xStep) {\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y2 = this.props.y2[i * y2ValuesPerX]\n\t\t\t\tif (!Number.isFinite(x) || !Number.isFinite(y2) || x < xMin || x > xMax) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tconst tx = transformX(x)\n\t\t\t\tconst txFixed = tx.toFixed(1)\n\t\t\t\tconst ty2 = transformY2(y2)\n\n\t\t\t\tconst text = y2LabelFunc(y2, y2Min, y2Max)\n\t\t\t\tlabels.push(\n\t\t\t\t\t<text\n\t\t\t\t\t\tkey={\"y2lap\" + i}\n\t\t\t\t\t\tx={txFixed}\n\t\t\t\t\t\ty={(labelYOffset - ty2).toFixed(1)}\n\t\t\t\t\t\ttransform=\"scale(1,-1)\"\n\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\tfill={y2Color}\n\t\t\t\t\t>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</text>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\tif (hasLeftYLabels) {\n\t\t\tlet ticksD = \"\"\n\t\t\tconst tickX = (axisXOffset - textHeight * 0.2).toFixed(1)\n\t\t\tconst labelYOffset = labelSize * 0.3\n\t\t\tconst start = yLabelOrigin !== 0 ? yLabelOrigin : Math.ceil(yMin / yLabelSpacing) * yLabelSpacing\n\t\t\tfor (let y = start; y <= yMax; y += yLabelSpacing) {\n\t\t\t\tif (y >= yMin) {\n\t\t\t\t\tconst ty = transformY(y)\n\t\t\t\t\tticksD += `M${tickX} ${ty.toFixed(1)}H${axisXOffsetFixed}`\n\t\t\t\t\tlabels.push(\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\tkey={\"ylt\" + y}\n\t\t\t\t\t\t\tx={tickX}\n\t\t\t\t\t\t\ty={(labelYOffset - ty).toFixed(1)}\n\t\t\t\t\t\t\ttransform=\"scale(1,-1)\"\n\t\t\t\t\t\t\ttextAnchor=\"end\"\n\t\t\t\t\t\t\tfill={yLabelColor}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{yLabelFunc(y, yMin, yMax)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlabels.push(<path key=\"yll\" d={ticksD} stroke={yLabelColor} strokeWidth=\"1\"/>)\n\t\t}\n\t\tif (hasRightYLabels) {\n\t\t\tlet ticksD = \"\"\n\t\t\tconst tickX = (rightAxisX + textHeight * 0.2).toFixed(1)\n\t\t\tconst labelYOffset = labelSize * 0.3\n\t\t\tconst start = y2LabelOrigin !== 0 ? y2LabelOrigin : Math.ceil(y2Min / y2LabelSpacing) * y2LabelSpacing\n\t\t\tfor (let y2 = start; y2 <= y2Max; y2 += y2LabelSpacing) {\n\t\t\t\tif (y2 >= y2Min) {\n\t\t\t\t\tconst ty2 = transformY2(y2)\n\t\t\t\t\tticksD += `M${rightAxisXFixed} ${ty2.toFixed(1)}H${tickX}`\n\t\t\t\t\tlabels.push(\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\tkey={\"y2lt\" + y2}\n\t\t\t\t\t\t\tx={tickX}\n\t\t\t\t\t\t\ty={(labelYOffset - ty2).toFixed(1)}\n\t\t\t\t\t\t\ttransform=\"scale(1,-1)\"\n\t\t\t\t\t\t\tfill={y2LabelColor}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{y2LabelFunc(y2, y2Min, y2Max)}\n\t\t\t\t\t\t</text>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlabels.push(<path key=\"y2ll\" d={ticksD} stroke={y2LabelColor} strokeWidth=\"1\"/>)\n\t\t}\n\n\t\tif (yAxisTitle) {\n\t\t\tlabels.push(\n\t\t\t\t<text\n\t\t\t\t\tkey=\"yAxisTitle\"\n\t\t\t\t\tx={axisXOffset.toFixed(1)}\n\t\t\t\t\ty={(-rangeTop - labelSize).toFixed(1)}\n\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\ttransform=\"scale(1,-1)\"\n\t\t\t\t\tfill={yColor}\n\t\t\t\t>\n\t\t\t\t\t{yAxisTitle}\n\t\t\t\t</text>\n\t\t\t)\n\t\t}\n\n\t\tif (y2AxisTitle) {\n\t\t\tlabels.push(\n\t\t\t\t<text\n\t\t\t\t\tkey=\"y2AxisTitle\"\n\t\t\t\t\tx={rightAxisX.toFixed(1)}\n\t\t\t\t\ty={(-rangeTop - labelSize).toFixed(1)}\n\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\ttransform=\"scale(1,-1)\"\n\t\t\t\t\tfill={y2LabelColor}\n\t\t\t\t>\n\t\t\t\t\t{y2AxisTitle}\n\t\t\t\t</text>\n\t\t\t)\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// y data series graphics:\n\n\t\tconst bars = []\n\n\t\tlet yPoints = \"\"\n\t\tif (yBars) {\n\t\t\t// draw y values as bars\n\t\t\tconst barWidth = yBars / yValuesPerX;\n\t\t\tconst yZero = transformY(0)\n\t\t\tlet moveLeft\n\t\t\tif (!y2Bars && !y3Bars) {\n\t\t\t\tmoveLeft = yBars * 0.5\n\t\t\t} else if (y2Bars && y3Bars) {\n\t\t\t\tmoveLeft = yBars + y2Bars * 0.5\n\t\t\t} else {\n\t\t\t\tmoveLeft = yBars\n\t\t\t}\n\t\t\tfor (let i = 0; i < numYPoints; i += xStep) {\n\t\t\t\tfor (let j = 0; j < yValuesPerX; j++) {\n\t\t\t\t\tlet x = this.props.x[i]\n\t\t\t\t\tlet y = this.props.y[i * yValuesPerX + j]\n\t\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\t\t\t\t\tx = transformX(x) - moveLeft + (j * barWidth)\n\t\t\t\t\t\ty = transformY(y)\n\t\t\t\t\t\tlet h = y - yZero\n\t\t\t\t\t\tif (h < 0) {\n\t\t\t\t\t\t\th = -h\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ty = yZero\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet key = \"yBar\" + i\n\t\t\t\t\t\tif (j > 0) {\n\t\t\t\t\t\t\tkey += \"_\" + j\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbars.push(<rect key={key} x={x.toFixed(1)} y={y.toFixed(1)} width={barWidth} height={h.toFixed(1)} stroke=\"none\" fill={yColor} fillOpacity={yOpacity}/>)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// draw y values as line-strip\n\t\t\tfor (let i = 0; i < numYPoints; i += xStep) {\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y = this.props.y[i * yValuesPerX]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\t\t\t\tyPoints += `${transformX(x).toFixed(1)},${transformY(y).toFixed(1)} `\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (xStep > 1) {\n\t\t\t\t// if we are stepping over values, make sure to add the last one\n\t\t\t\tconst i = numYPoints - 1\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y = this.props.y[i * yValuesPerX]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\t\t\t\tyPoints += `${transformX(x).toFixed(1)},${transformY(y).toFixed(1)} `\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet selectedMarker = null\n\t\tconst hasSelectedMarker = !!this.props.selectedMarkerSize && selectedIndex >= 0 && selectedIndex < numYPoints\n\t\tif (hasSelectedMarker) {\n\t\t\tconst i = selectedIndex\n\t\t\tconst x = this.props.x[i]\n\t\t\tconst y = this.props.y[i * yValuesPerX]\n\t\t\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\t\t\tselectedMarker = (\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={transformX(x).toFixed(1)}\n\t\t\t\t\t\tcy={transformY(y).toFixed(1)}\n\t\t\t\t\t\tr={this.props.selectedMarkerSize * 0.5}\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tfill={this.props.selectedMarkerColor}\n\t\t\t\t\t\tonClick={this.props.onClickMarker ? this.onClickMarker : null}\n\t\t\t\t\t\tdata-index={i}\n\t\t\t\t\t\tdata-x={x}\n\t\t\t\t\t\tdata-y={y}\n\t\t\t\t\t\tdata-selected\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// y2 data series graphics:\n\n\t\tlet numY2Points = 0\n\t\tlet y2Points = \"\"\n\t\tif (this.props.y2) {\n\t\t\tnumY2Points = Math.min(this.props.x.length, this.props.y2.length / y2ValuesPerX)\n\t\t\tif (y2Bars) {\n\t\t\t\tconst barWidth = y2Bars / y2ValuesPerX;\n\t\t\t\tconst y2Zero = transformY2(0)\n\t\t\t\tlet moveLeft\n\t\t\t\tif (yBars && !y3Bars) {\n\t\t\t\t\tmoveLeft = 0\n\t\t\t\t} else if (!yBars && y3Bars) {\n\t\t\t\t\tmoveLeft = y2Bars\n\t\t\t\t} else {\n\t\t\t\t\tmoveLeft = y2Bars * 0.5\n\t\t\t\t}\n\t\t\t\tfor (let i = 0; i < numY2Points; i += xStep) {\n\t\t\t\t\tfor (let j = 0; j < y2ValuesPerX; j++) {\n\t\t\t\t\t\tlet x = this.props.x[i]\n\t\t\t\t\t\tlet y2 = this.props.y2[i * y2ValuesPerX + j]\n\t\t\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y2)) {\n\t\t\t\t\t\t\tx = transformX(x) - moveLeft + (j * barWidth)\n\t\t\t\t\t\t\ty2 = transformY2(y2)\n\t\t\t\t\t\t\tlet h = y2 - y2Zero\n\t\t\t\t\t\t\tif (h < 0) {\n\t\t\t\t\t\t\t\th = -h\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ty2 = y2Zero\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet key = \"y2Bar\" + i\n\t\t\t\t\t\t\tif (j > 0) {\n\t\t\t\t\t\t\t\tkey += \"_\" + j\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbars.push(<rect key={key} x={x.toFixed(1)} y={y2.toFixed(1)} width={barWidth} height={h.toFixed(1)} stroke=\"none\" fill={y2Color} fillOpacity={y2Opacity}/>)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < numY2Points; i += xStep) {\n\t\t\t\t\tconst x = this.props.x[i]\n\t\t\t\t\tconst y2 = this.props.y2[i * y2ValuesPerX]\n\t\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y2)) {\n\t\t\t\t\t\ty2Points += ` ${transformX(x).toFixed(1)},${transformY2(y2).toFixed(1)}`\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (xStep > 1) {\n\t\t\t\t\tconst i = numY2Points - 1\n\t\t\t\t\tconst x = this.props.x[i]\n\t\t\t\t\tconst y2 = this.props.y2[i * y2ValuesPerX]\n\t\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y2)) {\n\t\t\t\t\t\ty2Points += ` ${transformX(x).toFixed(1)},${transformY2(y2).toFixed(1)}`\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// y3 data series graphics:\n\n\t\tlet numY3Points = 0\n\t\tlet y3Points = \"\"\n\t\tif (this.props.y3) {\n\t\t\tnumY3Points = Math.min(this.props.x.length, this.props.y3.length / y3ValuesPerX)\n\t\t\tif (y3Bars) {\n\t\t\t\tconst barWidth = y3Bars / y3ValuesPerX;\n\t\t\t\tconst y3Zero = transformY3(0)\n\t\t\t\tlet moveLeft\n\t\t\t\tif (!yBars && !y3Bars) {\n\t\t\t\t\tmoveLeft = y3Bars * 0.5\n\t\t\t\t} else if (yBars && y3Bars) {\n\t\t\t\t\tmoveLeft = y2Bars * -0.5\n\t\t\t\t} else {\n\t\t\t\t\tmoveLeft = 0\n\t\t\t\t}\n\t\t\t\tfor (let i = 0; i < numY3Points; i += xStep) {\n\t\t\t\t\tfor (let j = 0; j < y3ValuesPerX; j++) {\n\t\t\t\t\t\tlet x = this.props.x[i]\n\t\t\t\t\t\tlet y3 = this.props.y3[i * y3ValuesPerX + j]\n\t\t\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y3)) {\n\t\t\t\t\t\t\tx = transformX(x) - moveLeft + (j * barWidth)\n\t\t\t\t\t\t\ty3 = transformY3(y3)\n\t\t\t\t\t\t\tlet h = y3 - y3Zero\n\t\t\t\t\t\t\tif (h < 0) {\n\t\t\t\t\t\t\t\th = -h\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ty3 = y3Zero\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet key = \"y3Bar\" + i\n\t\t\t\t\t\t\tif (j > 0) {\n\t\t\t\t\t\t\t\tkey += \"_\" + j\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbars.push(<rect key={key} x={x.toFixed(1)} y={y3.toFixed(1)} width={barWidth} height={h.toFixed(1)} stroke=\"none\" fill={y3Color} fillOpacity={y3Opacity}/>)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < numY3Points; i += xStep) {\n\t\t\t\t\tconst x = this.props.x[i]\n\t\t\t\t\tconst y3 = this.props.y3[i * y3ValuesPerX]\n\t\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y3)) {\n\t\t\t\t\t\ty3Points += ` ${transformX(x).toFixed(1)},${transformY3(y3).toFixed(1)}`\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (xStep > 1) {\n\t\t\t\t\tconst i = numY3Points - 1\n\t\t\t\t\tconst x = this.props.x[i]\n\t\t\t\t\tconst y3 = this.props.y3[i * y3ValuesPerX]\n\t\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y3)) {\n\t\t\t\t\t\ty3Points += ` ${transformX(x).toFixed(1)},${transformY3(y3).toFixed(1)}`\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// y4 data series graphics:\n\n\t\tlet numY4Points = 0\n\t\tlet y4Points = \"\"\n\t\tif (this.props.y4) {\n\t\t\tnumY4Points = Math.min(this.props.x.length, this.props.y4.length)\n\t\t\tfor (let i = 0; i < numY4Points; i += xStep) {\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y4 = this.props.y4[i]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y4)) {\n\t\t\t\t\ty4Points += ` ${transformX(x).toFixed(1)},${transformY4(y4).toFixed(1)}`\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (xStep > 1) {\n\t\t\t\tconst i = numY4Points - 1\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y4 = this.props.y4[i]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y4)) {\n\t\t\t\t\ty4Points += ` ${transformX(x).toFixed(1)},${transformY4(y4).toFixed(1)}`\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// Markers for data series points:\n\n\t\tconst markers = []\n\t\tif (markerSize > 0) {\n\t\t\tconst r = markerSize * 0.5\n\t\t\tconst onClick = this.props.onClickMarker ? this.onClickMarker : null\n\t\t\tfor (let i = 0; i < numYPoints; i += xStep) {\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y = this.props.y[i * yValuesPerX]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y) && !(hasSelectedMarker && i === selectedIndex)) {\n\t\t\t\t\tmarkers.push(\n\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\tkey={\"marker_\" + i}\n\t\t\t\t\t\t\tcx={transformX(x).toFixed(1)}\n\t\t\t\t\t\t\tcy={transformY(y).toFixed(1)}\n\t\t\t\t\t\t\tr={r}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill={yColor}\n\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\tdata-index={i}\n\t\t\t\t\t\t\tdata-x={x}\n\t\t\t\t\t\t\tdata-y={y}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (markerSize2 > 0) {\n\t\t\tconst r = markerSize2 * 0.5\n\t\t\tfor (let i = 0; i < numY2Points; i += xStep) {\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y = this.props.y2[i * y2ValuesPerX]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\t\t\t\tmarkers.push(\n\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\tkey={\"marker2_\" + i}\n\t\t\t\t\t\t\tcx={transformX(x).toFixed(1)}\n\t\t\t\t\t\t\tcy={transformY2(y).toFixed(1)}\n\t\t\t\t\t\t\tr={r}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill={y2Color}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (markerSize3 > 0) {\n\t\t\tconst r = markerSize3 * 0.5\n\t\t\tfor (let i = 0; i < numY3Points; i += xStep) {\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y = this.props.y3[i * y3ValuesPerX]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\t\t\t\tmarkers.push(\n\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\tkey={\"marker3_\" + i}\n\t\t\t\t\t\t\tcx={transformX(x).toFixed(1)}\n\t\t\t\t\t\t\tcy={transformY3(y).toFixed(1)}\n\t\t\t\t\t\t\tr={r}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill={y3Color}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (markerSize4 > 0) {\n\t\t\tconst r = markerSize4 * 0.5\n\t\t\tfor (let i = 0; i < numY4Points; i += xStep) {\n\t\t\t\tconst x = this.props.x[i]\n\t\t\t\tconst y = this.props.y4[i]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\t\t\t\tmarkers.push(\n\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\tkey={\"marker4_\" + i}\n\t\t\t\t\t\t\tcx={transformX(x).toFixed(1)}\n\t\t\t\t\t\t\tcy={transformY4(y).toFixed(1)}\n\t\t\t\t\t\t\tr={r}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill={y4Color}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst { extraPointsX, extraPointsY, extraPointsSize, extraPointsColor } = this.props\n\t\tif (extraPointsX && extraPointsY && extraPointsSize > 0) {\n\t\t\tconst r = extraPointsSize * 0.5\n\t\t\tconst count = Math.min(extraPointsX.length, extraPointsY.length)\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tconst x = extraPointsX[i]\n\t\t\t\tconst y = extraPointsY[i]\n\t\t\t\tif (Number.isFinite(x) && Number.isFinite(y)) {\n\t\t\t\t\tmarkers.push(\n\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\tkey={\"extraPoints_\" + i}\n\t\t\t\t\t\t\tcx={transformX(x).toFixed(1)}\n\t\t\t\t\t\t\tcy={transformY(y).toFixed(1)}\n\t\t\t\t\t\t\tr={r}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill={extraPointsColor}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// Draw background color based on data series:\n\n\t\tconst bg = []\n\t\tif (this.props.bgValues && this.props.bgValues.length > 0 && this.props.bgColorFunc) {\n\t\t\tconst numPoints = Math.min(this.props.x.length, this.props.bgValues.length)\n\t\t\tif (numPoints >= 2) {\n\t\t\t\tlet lastX = transformX(this.props.x[0])\n\t\t\t\tlet lastB = this.props.bgValues[0]\n\t\t\t\tfor (let i = 1; i < numPoints; i += xStep) {\n\t\t\t\t\tconst b = this.props.bgValues[i]\n\t\t\t\t\tif (b !== lastB) {\n\t\t\t\t\t\tconst x = (transformX(this.props.x[i-1]) + transformX(this.props.x[i])) * 0.5\n\t\t\t\t\t\tconst width = x - lastX\n\t\t\t\t\t\tbg.push(<rect key={\"bg\" + (i-1)} stroke=\"none\" fill={this.props.bgColorFunc(lastB)} x={lastX.toFixed(1)} y={axisYOffsetFixed} width={width.toFixed(1)} height={rangeHeight.toFixed(1)}/>)\n\t\t\t\t\t\tlastX = x\n\t\t\t\t\t\tlastB = b\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst i = numPoints - 1\n\t\t\t\tconst x = transformX(this.props.x[i])\n\t\t\t\tconst width = x - lastX\n\t\t\t\tbg.push(<rect key={\"bg\" + i} stroke=\"none\" fill={this.props.bgColorFunc(lastB)} x={lastX.toFixed(1)} y={axisYOffsetFixed} width={width.toFixed(1)} height={rangeHeight.toFixed(1)}/>)\n\t\t\t}\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// X range markers left and right:\n\n\t\t// TODO draw markers only when active,\n\t\t// but initialize drag interactions when activated after component was mounted\n\n\t\tlet leftMarkerX = 0\n\t\tlet leftMarkerHeight = 0\n\t\tif (leftMarkerVisible) {\n\t\t\tleftMarkerX = transformX(this.props.leftMarkerX)\n\t\t\tleftMarkerHeight = rangeHeight\n\t\t}\n\n\t\tlet rightMarkerX = 0\n\t\tlet rightMarkerHeight = 0\n\t\tif (rightMarkerVisible) {\n\t\t\trightMarkerX = transformX(this.props.rightMarkerX)\n\t\t\trightMarkerHeight = rangeHeight\n\t\t}\n\n\t\t////////////////////////////////////////////////////////////////////////////////\n\t\t// Text in diagram center:\n\n\t\tconst centerText = this.props.centerText.length === 0 ? null : (\n\t\t\t<text\n\t\t\t\tx={width * 0.5}\n\t\t\t\ty={height * 0.5}\n\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\tfontFamily={this.props.centerTextFont}\n\t\t\t\tfontSize={this.props.centerTextSize}\n\t\t\t\tfill={this.props.centerTextColor}\n\t\t\t\tstroke=\"none\"\n\t\t\t>\n\t\t\t\t{this.props.centerText}\n\t\t\t</text>\n\t\t)\n\n\t\treturn (\n\t\t\t<svg ref=\"parent\" width={width} height={height} viewBox={`0 0 ${width} ${height}`}>\n\t\t\t\t<defs>\n\t\t\t\t\t<linearGradient id=\"leftMarkerGradient\" x1=\"0%\" x2=\"100%\">\n\t\t\t\t\t\t<stop offset=\"0%\" style={{stopColor: this.props.leftMarkerColor, stopOpacity: 0}}/>\n\t\t\t\t\t\t<stop offset=\"100%\" style={{stopColor: this.props.leftMarkerColor, stopOpacity: 1}}/>\n\t\t\t\t\t</linearGradient>\n\t\t\t\t\t<linearGradient id=\"rightMarkerGradient\" x1=\"0%\" x2=\"100%\">\n\t\t\t\t\t\t<stop offset=\"0%\" style={{stopColor: this.props.rightMarkerColor, stopOpacity: 1}}/>\n\t\t\t\t\t\t<stop offset=\"100%\" style={{stopColor: this.props.rightMarkerColor, stopOpacity: 0}}/>\n\t\t\t\t\t</linearGradient>\n\t\t\t\t</defs>\n\t\t\t\t{backgroundColor ? <rect fill={backgroundColor} width=\"100%\" height=\"100%\"/> : null}\n\t\t\t\t{centerText}\n\t\t\t\t<g transform={`scale(1,-1) translate(0,-${height})`} fontFamily={labelFont} fontSize={labelSize}>\n\t\t\t\t\t{bg}\n\t\t\t\t\t{gridLines}\n\t\t\t\t\t<polyline stroke={this.props.axisColor} strokeWidth=\"1\" fill=\"none\" points={axisPoints}/>\n\t\t\t\t\t{labels}\n\t\t\t\t\t{bars}\n\t\t\t\t\t{y4Points.length > 0 ? <polyline stroke={y4Color} strokeOpacity={y4Opacity} strokeWidth={this.props.y4LineWidth} strokeDasharray={this.props.y4LineDashes} fill=\"none\" points={y4Points}/> : null}\n\t\t\t\t\t{y3Points.length > 0 ? <polyline stroke={y3Color} strokeOpacity={y3Opacity} strokeWidth={this.props.y3LineWidth} strokeDasharray={this.props.y3LineDashes} fill=\"none\" points={y3Points}/> : null}\n\t\t\t\t\t{y2Points.length > 0 ? <polyline stroke={y2Color} strokeOpacity={y2Opacity} strokeWidth={this.props.y2LineWidth} strokeDasharray={this.props.y2LineDashes} fill=\"none\" points={y2Points}/> : null}\n\t\t\t\t\t{yPoints.length > 0 ? <polyline stroke={yColor} strokeOpacity={yOpacity} strokeWidth={this.props.yLineWidth} strokeDasharray={this.props.yLineDashes} fill=\"none\" points={yPoints}/> : null}\n\t\t\t\t\t{markers}\n\t\t\t\t\t{selectedMarker}\n\t\t\t\t\t<g ref=\"leftMarkerGroup\">\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tref=\"leftMarkerCover\"\n\t\t\t\t\t\t\tx={axisXOffsetFixed}\n\t\t\t\t\t\t\ty={axisYOffsetFixed}\n\t\t\t\t\t\t\twidth={(leftMarkerX - axisXOffset).toFixed(1)}\n\t\t\t\t\t\t\theight={leftMarkerHeight.toFixed(1)}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill={this.props.leftRightMarkerCoverColor}\n\t\t\t\t\t\t\tfillOpacity={this.props.leftRightMarkerCoverOpacity}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tref=\"leftMarker\"\n\t\t\t\t\t\t\tx={leftMarkerX-this.props.leftRightMarkerWidth}\n\t\t\t\t\t\t\ty={axisYOffset}\n\t\t\t\t\t\t\twidth={this.props.leftRightMarkerWidth}\n\t\t\t\t\t\t\theight={leftMarkerHeight.toFixed(1)}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill=\"url(#leftMarkerGradient)\"\n\t\t\t\t\t\t\tstyle={{touchAction: \"none\"}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g ref=\"rightMarkerGroup\">\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tref=\"rightMarkerCover\"\n\t\t\t\t\t\t\tx={rightMarkerX.toFixed(1)}\n\t\t\t\t\t\t\ty={axisYOffset.toFixed(1)}\n\t\t\t\t\t\t\twidth={(rightAxisX - rightMarkerX).toFixed(1)}\n\t\t\t\t\t\t\theight={rightMarkerHeight.toFixed(1)}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill={this.props.leftRightMarkerCoverColor}\n\t\t\t\t\t\t\tfillOpacity={this.props.leftRightMarkerCoverOpacity}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\tref=\"rightMarker\"\n\t\t\t\t\t\t\tx={rightMarkerX.toFixed(1)}\n\t\t\t\t\t\t\ty={axisYOffset.toFixed(1)}\n\t\t\t\t\t\t\twidth={this.props.leftRightMarkerWidth}\n\t\t\t\t\t\t\theight={rightMarkerHeight.toFixed(1)}\n\t\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\t\tfill=\"url(#rightMarkerGradient)\"\n\t\t\t\t\t\t\tstyle={{touchAction: \"none\"}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t</svg>\n\t\t)\n\t}\n}\n","export { default as XYDiagram } from \"./XYDiagram\";"]}